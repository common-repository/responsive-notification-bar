!function(a,b){"use strict";var c=function(a){this.elem=a,this.$elem=b(a),this.jsonConfig=this.$elem.data("jbar")};c.prototype={init:function(){this.config=b.extend({},this.defaults,this.jsonConfig),this.construct().printMessage().createButton().removeData().togglejBar()},construct:function(){return this.$elem.before(b('<div class="jbar-push"></div><a href="#" class="jbar-down-toggle"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="jbar-down-arrow" alt=""></a>')),this.$elem.append(b('<div class="jbar-wrap"></div><a href="#" class="jbar-up-toggle"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="jbar-up-arrow" alt=""></a>')),this},printMessage:function(){return this.jsonConfig.message&&this.$elem.children(".jbar-wrap").append(b("<p>"+this.jsonConfig.message+"</p>")),this},createButton:function(){return this.jsonConfig.button&&this.jsonConfig.url&&this.$elem.children(".jbar-wrap").append(b('<a href="'+this.jsonConfig.url+'" class="jbar-button" target="_blank">'+this.jsonConfig.button+"</p>")),this},removeData:function(){return this.jsonConfig&&this.$elem.removeAttr("data-jbar"),this},togglejBar:function(){var a,c=this.$elem,d=b(".jbar-push"),e=b(".jbar-down-toggle"),f=b(".jbar-down-toggle, .jbar-up-toggle");"closed"===this.jsonConfig.state?(c.add(d).css({marginTop:-c.outerHeight()}),d.css({height:c.outerHeight()}),e.css({visibility:"visible"}),setTimeout(function(){c.add(d).css({display:"block"})},500)):"open"===this.jsonConfig.state&&(e.css({marginTop:-(e.outerHeight()+5)}),c.add(d).css({display:"block"}),d.css({height:c.outerHeight()}),setTimeout(function(){e.css({display:"block",visibility:"visible"})},500),c.data("clicks",!a)),f.on("click",function(b){a=c.data("clicks"),a?(c.add(d).css({marginTop:-c.outerHeight()}),e.css({marginTop:"0"})):(c.add(d).css({marginTop:"0"}),e.css({marginTop:-(c.outerHeight()+5)})),c.data("clicks",!a),b.preventDefault()})}},c.defaults=c.prototype.defaults,b.fn.jBar=function(){return this.each(function(){new c(this).init()})},a.jBar=c,b(function(){"jbar"===b("[data-init]").data("init")&&b("[data-jbar]").jBar()})}(window,jQuery);